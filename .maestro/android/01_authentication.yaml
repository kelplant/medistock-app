# MediStock Android - Authentication Tests
# Tests: Login, logout, invalid credentials
appId: com.medistock
---

# Test 1: Login with valid credentials
- launchApp:
    clearState: true

- waitForAnimationToEnd

# Verify login screen is displayed
- assertVisible: "Connexion"

# Enter username
- tapOn:
    id: "com.medistock:id/editUsername"
- inputText: "admin"

# Enter password
- tapOn:
    id: "com.medistock:id/editPassword"
- inputText: "admin"

# Tap login button
- tapOn:
    id: "com.medistock:id/btnLogin"

- waitForAnimationToEnd:
    timeout: 10000

# Verify we're on the home screen
- assertVisible:
    text: ".*Stock.*"
    optional: true

# Take screenshot for verification
- takeScreenshot: "android_login_success"

# Test 2: Logout
# Tap on profile badge (A icon in upper right)
- tapOn:
    id: ".*profile.*"
    optional: true
- tapOn:
    text: ".*Admin.*"
    optional: true

- waitForAnimationToEnd

# Tap logout button
- tapOn:
    text: ".*DÃ©connexion.*"
    optional: true
- tapOn:
    text: ".*Log.?out.*"
    optional: true

- waitForAnimationToEnd

# Confirm logout dialog if shown
- tapOn:
    text: "OK"
    optional: true

- waitForAnimationToEnd:
    timeout: 3000

# Verify back on login screen
- assertVisible: "Connexion"

# Take screenshot
- takeScreenshot: "android_logout_success"

# Test 3: Invalid credentials
- tapOn:
    id: "com.medistock:id/editUsername"
- inputText: "wronguser"

- tapOn:
    id: "com.medistock:id/editPassword"
- inputText: "wrongpassword"

- tapOn:
    id: "com.medistock:id/btnLogin"

- waitForAnimationToEnd

# Verify error message is shown
- assertVisible:
    text: ".*incorrect.*"
    optional: true

- takeScreenshot: "android_login_invalid"
