# MediStock iOS - Authentication Tests
# Tests: Login, logout, invalid credentials
appId: com.medistock.ios
---

# Test 1: Login with valid credentials
- launchApp:
    clearState: true

- waitForAnimationToEnd

# Verify login screen is displayed
- assertVisible: "MediStock"
- assertVisible: "Connexion"

# Enter username
- tapOn: "Nom d'utilisateur"
- inputText: "admin"

# Enter password
- tapOn: "Mot de passe"
- inputText: "admin"

# Tap login button
- tapOn: "Se connecter"

- waitForAnimationToEnd:
    timeout: 10000

# Verify we're on the home screen (MediStock title and menu visible)
- assertVisible: "MediStock"
- assertVisible: "Opérations"

# Take screenshot for verification
- takeScreenshot: "ios_login_success"

# Test 2: Logout
# Tap on profile badge (has accessibility label "Profil - ...")
- tapOn:
    text: ".*Profil.*"

- waitForAnimationToEnd

# Tap logout button
- tapOn: "Déconnexion"

- waitForAnimationToEnd

# Verify back on login screen
- assertVisible: "Connexion"

# Take screenshot
- takeScreenshot: "ios_logout_success"

# Test 3: Invalid credentials
- tapOn: "Nom d'utilisateur"
- inputText: "wronguser"

- tapOn: "Mot de passe"
- inputText: "wrongpassword"

- tapOn: "Se connecter"

- waitForAnimationToEnd

# Verify error message is shown
- assertVisible:
    text: ".*trouvé.*"

- takeScreenshot: "ios_login_invalid"
